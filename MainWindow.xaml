<Window x:Class="ArkServerManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ArkServerManager"
        Title="ARK Server Manager" Height="765" Width="1200" MinHeight="600" MinWidth="900"
        Background="#FF2D2D2D" Foreground="White">
    <!-- Removed StateChanged, Closing events -->
    <!-- Removed Window.Resources -->
    <!-- Removed TaskbarIcon namespace -->

    <Grid>
        <!-- Removed TaskbarIcon element -->

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" MinWidth="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Server List Panel -->
        <Border Grid.Column="0" Background="#FF3C3C3C" Margin="10" CornerRadius="5">
            <DockPanel Margin="10">
                <StackPanel DockPanel.Dock="Top" Orientation="Vertical">
                    <Button Content="New Server" Click="NewServer_Click" Margin="0,0,0,5" Background="#FF4CAF50" Foreground="White" Padding="10,5" BorderThickness="0" ToolTip="Create a new server profile"/>
                    <Button Content="Delete Server" Click="DeleteServer_Click" Margin="0,0,0,10" Background="#FFEF5350" Foreground="White" Padding="10,5" BorderThickness="0" ToolTip="Delete the selected server profile (Confirmation required)"/>
                    <Button x:Name="AddExistingServerButton"
                            Content="Add Existing Server..."
                            Click="AddExistingServer_Click"
                            Margin="0,0,0,10"
                            ToolTip="Add a profile pointing to an already-installed server directory" />
                </StackPanel>
                <Label DockPanel.Dock="Top" Content="Server Profiles:" Margin="0,5,0,2" FontWeight="SemiBold"/>
                <ListBox x:Name="ServerList" SelectionChanged="ServerList_SelectionChanged" Background="#FF424242" BorderThickness="1" BorderBrush="#FF616161" Foreground="White" ScrollViewer.VerticalScrollBarVisibility="Auto"/>
            </DockPanel>
        </Border>

        <!-- Main Content -->
        <TabControl x:Name="MainTabControl" Grid.Column="1" Margin="10,10,10,10" Background="#FF3C3C3C" BorderThickness="0">
            <TabItem Header="Basic Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Background="#FF424242" CornerRadius="5" Margin="5" Padding="10">
                        <StackPanel Margin="5">
                            <Label Content="Server Name:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="ServerNameTextBox" Margin="0,0,0,10" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged"/>
                            <Label Content="Map:" Foreground="White" FontWeight="SemiBold"/>
                            <ComboBox x:Name="MapComboBox" Margin="0,0,0,10" Background="#FF616161" Foreground="Black" SelectionChanged="BasicSetting_SelectionChanged">
                                <ComboBoxItem Content="TheIsland_WP" />
                                <ComboBoxItem Content="ScorchedEarth_WP" />
                                <ComboBoxItem Content="Aberration_WP" />
                                <ComboBoxItem Content="Extinction_WP" />
                                <ComboBoxItem Content="Genesis_WP" />
                                <ComboBoxItem Content="Genesis2_WP" />
                                <ComboBoxItem Content="LostIsland_WP" />
                                <ComboBoxItem Content="Fjordur_WP"/>
                                <ComboBoxItem Content="Valguero_P" />
                                <ComboBoxItem Content="CrystalIsles" />
                                <ComboBoxItem Content="TheCenter_WP" />
                                <ComboBoxItem Content="Ragnarok_WP" />
                            </ComboBox>
                            <Label Content="Player Limit:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="PlayerLimitTextBox" Width="100" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10" />
                            <Label Content="Query Port:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="QueryPortTextBox" Width="100" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10" />
                            <Label Content="Game Port:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="GamePortTextBox" Width="100" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10" />
                            <Label Content="RCON Port:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="RconPortTextBox" Width="100" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10" />
                            <Label Content="IP Address (for binding, usually 0.0.0.0):" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="IpAddressTextBox" Width="200" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10" ToolTip="Use 0.0.0.0 to bind to all interfaces (recommended)."/>
                            <Label Content="Admin Password:" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="AdminPasswordTextBox" Width="200" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10"/>
                            <Label Content="Server Password (optional):" Foreground="White" FontWeight="SemiBold"/>
                            <TextBox x:Name="ServerPasswordTextBox" Width="200" HorizontalAlignment="Left" Background="#FF616161" Foreground="White" TextChanged="BasicSetting_TextChanged" Margin="0,0,0,10"/>
                            <CheckBox x:Name="RconEnabledCheckBox" Content="Enable RCON" Foreground="White" Margin="0,0,0,10" Checked="BasicSetting_CheckBoxChanged" Unchecked="BasicSetting_CheckBoxChanged"/>

                            <!-- Removed AutoStart/Restart Checkboxes -->
                            <GroupBox Header="Mods" Foreground="LightGray" Margin="0,15,0,5">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ListBox x:Name="ModListBox" Grid.Column="0" Height="120" Margin="0,0,5,0"
                                          SelectionChanged="ModListBox_SelectionChanged"
                                          MouseDoubleClick="ModListBox_MouseDoubleClick" ToolTip="Double-click to copy Mod ID"
                                          Background="#FF4E4E52" Foreground="White"/>
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <Button x:Name="AddModButton" Content="Add Mod" Click="AddMod_Click" Margin="0,0,0,5" Width="75"/>
                                        <Button x:Name="RemoveModButton" Content="Remove" Click="RemoveMod_Click" Margin="0,0,0,5" Width="75" IsEnabled="False"/>
                                        <Button x:Name="ModUpButton" Content="Up ▲" Click="ModMove_Click" Tag="Up" Margin="0,10,0,5" Width="75" IsEnabled="true"/>
                                        <Button x:Name="ModDownButton" Content="Down ▼" Click="ModMove_Click" Tag="Down" Margin="0,0,0,5" Width="75" IsEnabled="true"/>
                                    </StackPanel>
                                </Grid>
                            </GroupBox>
                            <Separator Margin="0,10"/>
                            <Button x:Name="LaunchServerButton" Content="Launch Server" Click="LaunchServer_Click" Background="#FF4CAF50" Foreground="White" Padding="10,5" BorderThickness="0" Margin="0,5,0,5" ToolTip="Start the selected ARK server"/>
                            <Button x:Name="ValidateUpdateServerButton" Content="Validate/Update Server" Click="ValidateUpdateServer_Click" Background="#FFFFC107" Foreground="Black" Padding="10,5" BorderThickness="0" Margin="0,0,0,5" ToolTip="Use SteamCMD to check for and download server updates and mods"/>
                            <Button x:Name="TerminateServerButton" Content="Terminate Server" Click="TerminateServer_Click" Background="Red" Foreground="White" Padding="10,5" BorderThickness="0" Margin="0,0,0,5" ToolTip="Stop the currently running server process"/>
                        </StackPanel>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Server Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Background="#FF424242" CornerRadius="5" Margin="5">
                        <StackPanel Margin="10" x:Name="ServerSettingsPanel"/>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Game Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Background="#FF424242" CornerRadius="5" Margin="5">
                        <StackPanel Margin="10" x:Name="GameSettingsPanel"/>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="User Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Border Background="#FF424242" CornerRadius="5" Margin="5">
                        <StackPanel Margin="10" x:Name="UserSettingsPanel"/>
                    </Border>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Console">
                <Border Background="#FF1E1E1E" CornerRadius="5" Margin="5">
                    <DockPanel Margin="5">
                        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBox x:Name="CommandInput" Width="400" Margin="0,0,5,0" MinWidth="200" Background="#FF616161" Foreground="White" BorderThickness="1" BorderBrush="Gray" VerticalContentAlignment="Center" KeyDown="CommandInput_KeyDown"/>
                            <Button x:Name="SendCommandButton" Content="Send Command" Click="SendCommand_Click" Background="#FF2196F3" Foreground="White" Padding="10,5" BorderThickness="0" ToolTip="Send command via RCON"/>
                        </StackPanel>
                        <TextBox x:Name="ConsoleOutput" IsReadOnly="True" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Auto" FontFamily="Consolas" FontSize="12" Background="#FF1E1E1E" Foreground="#FFDCDCDC" BorderThickness="0" TextWrapping="NoWrap" AcceptsReturn="True" />
                    </DockPanel>
                </Border>
            </TabItem>
        </TabControl>
    </Grid>
</Window>